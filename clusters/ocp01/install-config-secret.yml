apiVersion: v1
kind: Secret
metadata:
  name: install-config
  namespace: cluster-name
stringData:
  install-config.yaml: |
    apiVersion: v1
    baseDomain: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "baseDomain" }}'
    compute:
    - architecture: amd64
      hyperthreading: Enabled
      name: worker
      platform:
        vsphere:
          coresPerSocket: 2
          cpus: 4
          memoryMB: 16384
          osDisk:
            diskSizeGB: 120
      replicas: 3
    controlPlane:
      architecture: amd64
      hyperthreading: Enabled
      name: master
      platform:
        vsphere:
          coresPerSocket: 2
          cpus: 4
          memoryMB: 16384
          osDisk:
            diskSizeGB: 120
      replicas: 3
    metadata:
      name: ocp01
    networking:
      clusterNetwork:
      - cidr: 10.131.0.0/16
        hostPrefix: 23
      machineNetwork:
      - cidr: 10.1.0.0/16
      networkType: OVNKubernetes
      serviceNetwork:
      - 172.31.0.0/16
    platform:
      vsphere:
        apiVIP: 1.1.1.1
        cluster: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "cluster" }}'
        datacenter: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "datacenter" }}'
        defaultDatastore: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "defaultDatastore" }}' 
        folder: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "vsphereFolder" }}'
        ingressVIP: 1.1.1.2
        network: xxx
        password: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "password" }}'
        resourcePool: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "vSphereResourcePool" }}'
        username: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "username" }}'
        vCenter: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "vCenter" }}'
    proxy:
      httpProxy: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "httpProxy" }}'
      httpsProxy: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "httpsProxy" }}'
    pullSecret: "" # skip, hive will inject based on it's secrets
    sshKey: '{{ fromSecret "cluster-provider-infra" "vsphere-creds" "ssh-publickey" }}'
type: Opaque
