---
object-templates-raw: |
  {{/* ##  Ensure the central deployments exists and has reached full pod health ## */}}
  {{- $opDepList := list "central" "central-db" "scanner" "scanner-db" }}

  {{- range $depName := $opDepList }}
    {{- $dep := (lookup "apps/v1" "Deployment" "stackrox" $depName) }}
  - complianceType: musthave
    objectDefinition:
      kind: Deployment
      apiVersion: apps/v1
      metadata:
        namespace: stackrox
        name: {{ $depName }}
      status:
        replicas: {{ $dep.spec.replicas }}
        updatedReplicas: {{ $dep.spec.replicas }}
        readyReplicas: {{ $dep.spec.replicas }}
        availableReplicas: {{ $dep.spec.replicas }}
        conditions:
          - type: Available
            status: 'True'
  {{- end }}
