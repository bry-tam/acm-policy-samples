---
apiVersion: policy.open-cluster-management.io/v1
kind: PolicyGenerator
metadata:
  name: gen-policy-workload-availability
policyDefaults:
  namespace: bry-tam-policies
  remediationAction: enforce
  consolidateManifests: false
  policySets: 
    - workload-availability-operator
placementBindingDefaults:
  name: "workload-availability-binding"

policies:
  - name: workload-availability-operator
    remediationAction: enforce
    manifests:
      - path: namespace.yml
      - path: fence-agent-operatorpolicy.yml
      - path: self-node-operatorpolicy.yml
      - path: node-healthcheck-operatorpolicy.yml
      - path: node-remediation-console.yml
        name: node-remediation-console
        extraDependencies: 
          - apiVersion: policy.open-cluster-management.io/v1beta1
            kind: OperatorPolicy
            name: node-healthcheck-operator-install
            compliance: "Compliant"
      - path: machine-deletion-operatorpolicy.yml

policySets:
  - name: workload-availability-operator
    placement:
      placementName: "ft-workload-availability--enabled"
